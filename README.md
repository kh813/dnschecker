# dnschecker

## 概要

Value-domainの「簡易DNS設定」で設定した値が、「DNSサーバーからルックアップした値」と同じかチェックします。

## インストール

インストールは不要です。お使いのOS用の実行ファイルをダウンロードし、任意のフォルダに保存してください。

## 使い方

`dnschecker`には、質問に答えるだけで簡単に利用できる「対話モード」と、コマンドラインから引数を指定して実行する「コマンドラインモード」があります。

### 対話モード

各OSの実行ファイルを実行すると、対話モードで起動します。

**主な流れ**
1.  **ドメイン名の入力**:
    *   チェックしたいドメイン名を入力します。過去に入力したドメインの履歴が表示され、番号で選択することもできます。
2.  **DNS設定の入力方法の選択**:
    *   **直接入力**: Value-domainのDNS設定をコピーし、ターミナルに直接貼り付けます。
    *   **クリップボードからペースト**: DNS設定をクリップボードにコピーすると、プログラムが自動で検知してチェックを実行します。（Macで1024文字を超える設定を貼り付ける場合などにおすすめです）
3.  **チェック実行**:
    *   入力されたDNS設定を元に、各レコードのルックアップが行われ、結果が表示されます。

チェック完了後、続けて別のドメインをチェックすることもできます。

### コマンドラインモード

コマンドラインからドメイン名とDNS設定ファイルを引数として渡すことで、非対話的にチェックを実行できます。CI/CDでの利用や、定型的なチェック作業を自動化する際に便利です。

**書式**
```bash
./dnschecker [オプション] <ドメイン名> <DNS設定ファイル>
```
*注意: `./dnschecker` の部分は、お使いのOSやアーキテクチャに応じた実行ファイル名に置き換えてください。*

**使用例**
```bash
# Linuxの場合 (例: dnschecker.linux-x64)
./dnschecker.linux-x64 my-domain.com dns-mydomain.conf

# Macの場合 (例: dnschecker.mac-arm64)
./dnschecker.mac-arm64 my-domain.com dns-mydomain.conf

# Windowsの場合 (例: dnschecker.exe)
dnschecker.exe my-domain.com dns-mydomain.conf
```

### オプション

#### `-p` : 並列実行

DNS設定ファイルに多数のレコードが含まれている場合、`-p`オプションを付けると、DNSルックアップが並列で実行され、チェック時間を短縮できます。

**使用例**
```bash
# Linuxの場合
./dnschecker.linux-x64 -p my-domain.com dns-mydomain.conf
```

## 各OSでの実行について

### Windows

`dnschecker.exe` を直接ダブルクリックすると、対話モードで起動します。コマンドプロンプトで `dnschecker.exe` を使って上記のコマンドラインモードを利用することもできます。

### Mac

`dnschecker.mac-arm64` を直接実行すると、対話モードで起動します。ターミナルで `dnschecker.mac-arm64` を使って上記のコマンドラインモードを利用することもできます。

**補足**:
Macのターミナルでは、1行に貼り付けられる文字数が1024バイトに制限されている場合があります。SPFレコードをフラット化した際など、設定が長くなる場合は、対話モードの「クリップボードからペースト」機能を利用すると、この制限を回避できます。

### Linux

お使いのLinuxのアーキテクチャに応じた実行ファイル（例: `dnschecker.linux-x64` または `dnschecker.linux-arm64`）をターミナルで実行してください。対話モード、コマンドラインモード共に利用できます。